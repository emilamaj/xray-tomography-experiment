<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Tomography experiments</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link type="text/css" rel="stylesheet" href="main.css">
	</head>
	<body>
		<div id="pageBlocks">

			<div id="scanBlock">
				<div id="scanInfo">
					<p>Reference model to be sliced and reconstructed</p>
				</div>
				<div id="scanViewer" class="glcanvas">
					<!--Code for the model viewer is injected here in JS-->
				</div>

				<button class="accordion">Model Scan Controls</button>
				<div id="scanControls" class="panel">
					<!--Code for tomography parameters control-->
					<div class="sidediv">
						<div class="ctrltxt">
							<p class="textLabel">Scan Height: <span id="scanHeightText"></span></p>
							<input type="range" min="0" max="1000" value="200" class="slider" id="scanHeightSlider">
						</div>
						<div class="ctrltxt">
							<p class="textLabel">Scan Radius: <span id="scanRadiusText"></span></p>
							<input type="range" min="0" max="1000" value="300" class="slider" id="scanRadiusSlider">
						</div>
					</div>
					<div class="sidediv">
						<div class="ctrltxt">
							<p class="textLabel">Angular subdivisions: <span id="angularDivText"></span></p>
							<input type="range" min="0" max="4096" value="128" class="slider" id="angularDivSlider">
						</div>
						<div class="ctrltxt">
							<p class="textLabel">Vertical subdivisions: <span id="verticalDivText"></span></p>
							<input type="range" min="0" max="128" value="32" class="slider" id="verticalDivSlider">
						</div>
					</div>
					<div class="sidediv">
						<div class="ctrltxt">
							<p class="textLabel">Beam divergence: <span id="beamDivText"></span>Â°</p>
							<input type="range" min="0" max="180" value="180" class="slider" id="beamDivSlider">
						</div>
						<div class="ctrltxt">
							<p class="textLabel">Number of detectors: <span id="numDetText"></span></p>
							<input type="range" min="0" max="1024" value="64" class="slider" id="numDetSlider">
						</div>
					</div>
					
					<div class="sidediv">
						<div class="ctrltxt">
							<p class="textLabel">Model Absorption: <span id="modAbsText"></span></p>
							<input type="range" min="0" max="100" value="15" class="slider" id="modAbsSlider">
						</div>
					</div>
				</div>
			</div>

			<div id="sliceBlock">
				<div id="sliceInfo">
					<p>View the results slice by slice</p>
				</div>
				<div id="sliceViewer" class="glcanvas">
					<!--slice viewer is injected here in JS-->
				</div>

				<button class="accordion">Slice Controls</button>
				<div id="sliceControls" class="panel">
					<div class="sidediv">
						<div class="ctrltxt">
							<p class="textLabel">Slice Position: <span id="slicePosText"></span>%</p>
							<input type="range" min="0" max="1000" value="300" class="slider" id="slicePosSlider">
						</div>
						<div class="ctrltxt">
							<p class="textLabel">Grid Dimensions: <span id="sliceDimText"></span></p>
							<input type="range" min="0" max="15" value="8" class="slider" id="sliceDimSlider">
						</div>
					</div>
					<!--TODO: Remove button if slice time is low enough-->
					<div class="sidediv">
						<div class="ctrltxt">
							<input type="button" value="Show Slice" class="button" id="sliceButton">
						</div>
					</div>
				</div>

				<button class="accordion">Result Filtering</button>
				<div id="filterControls" class="panel">
					<div class="sidediv">
						<div class="ctrltxt">
							<p class="textLabel">Intensity floor: <span id="sliceFloorText">%</span></p>
							<input type="range" min="0" max="100" value="10" class="slider" id="sliceFloorSlider">
						</div>
						<div class="ctrltxt">
							<p class="textLabel">Clip radius: <span id="sliceClipText">%</span></p>
							<input type="range" min="0" max="100" value="80" class="slider" id="sliceClipSlider">
						</div>
					</div>
					<div class="sidediv">
						<div class="ctrltxt">
							<input type="button" value="Apply Filter" class="button" id="sliceFilterButton">
						</div>
					</div>
				</div>
			</div>

			<div id="catBlock">
				<div id="catInfo">
					<p>View the complete computer assisted 3d reconstruction here</p>
				</div>
				<div id="catViewer" class="glcanvas">
					<!--computed assisted tomography viewer is injected here in JS -->
				</div>
				
				<button class="accordion">CAT 3D Controls</button>
				<div id="catControls" class="panel">
					<div class="sidediv">
						<div class="ctrltxt">
							<input type="button" value="Start CAT reconstruction" class="button" id="startButton">
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			//Accordion animation
			let acc = document.getElementsByClassName("accordion");
			let i;
			
			for (i = 0; i < acc.length; i++) {
			acc[i].addEventListener("click", function() {
				this.classList.toggle("active");
				var panel = this.nextElementSibling;
				if (panel.style.maxHeight) {
				panel.style.maxHeight = null;
				} else {
				panel.style.maxHeight = panel.scrollHeight + "px";
				}
			});
			}
		</script>
		<script type="module" src="main.js"></script>
	</body>
</html>
